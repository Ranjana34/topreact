/*! For license information please see picker.js.LICENSE.txt */
!function(e){"function"==typeof define&&define.amd?define("picker",["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):this.Picker=e(jQuery)}((function(e){function t(i,d,c,l){function f(){return t._.node("div",t._.node("div",t._.node("div",t._.node("div",k.component.nodes(y.open),$.box),$.wrap),$.frame),$.holder,'tabindex="-1"')}function p(){b.data(d,k).addClass($.input).val(b.data("value")?k.get("select",_.format):i.value).on("focus."+y.id+" click."+y.id,function(e,t,n){var o;return function(){var r=this,i=arguments,a=function(){o=null,n||e.apply(r,i)},d=n&&!o;clearTimeout(o),o=setTimeout(a,t),d&&e.apply(r,i)}}((function(e){e.preventDefault(),k.open()}),100)).on("mousedown",(function(){y.handlingOpen=!0;var t=function(){setTimeout((function(){e(document).off("mouseup",t),y.handlingOpen=!1}),0)};e(document).on("mouseup",t)})),_.editable||b.on("keydown."+y.id,g),r(i,{haspopup:!0,expanded:!1,readonly:!1,owns:i.id+"_root"})}function h(){k.$holder.on({keydown:g,"focus.toOpen":m,blur:function(){b.removeClass($.target)},focusin:function(e){k.$root.removeClass($.focused),e.stopPropagation()},"mousedown click":function(t){var n=o(t,i);n!=k.$holder[0]&&(t.stopPropagation(),"mousedown"!=t.type||e(n).is("input, select, textarea, button, option")||(t.preventDefault(),k.$holder.eq(0).focus()))}}).on("click","[data-pick], [data-nav], [data-clear], [data-close]",(function(){var t=e(this),n=t.data(),o=t.hasClass($.navDisabled)||t.hasClass($.disabled),r=a();r=r&&(r.type||r.href?r:null),(o||r&&!e.contains(k.$root[0],r))&&k.$holder.eq(0).focus(),!o&&n.nav?k.set("highlight",k.component.item.highlight,{nav:n.nav}):!o&&"pick"in n?(k.set("select",n.pick),_.closeOnSelect&&k.close(!0)):n.clear?(k.clear(),_.closeOnClear&&k.close(!0)):n.close&&k.close(!0)}))}function m(e){e.stopPropagation(),b.addClass($.target),k.$root.addClass($.focused),k.open()}function g(e){var t=e.keyCode,n=/^(8|46)$/.test(t);if(27==t)return k.close(!0),!1;(32==t||n||!y.open&&k.component.key[t])&&(e.preventDefault(),e.stopPropagation(),n?k.clear().close():k.open())}if(!i)return t;var v=!1,y={id:i.id||"P"+Math.abs(~~(Math.random()*new Date)),handlingOpen:!1},_=c?e.extend(!0,{},c.defaults,l):l||{},$=e.extend({},t.klasses(),_.klass),b=e(i),x=function(){return this.start()},k=x.prototype={constructor:x,$node:b,start:function(){return y&&y.start?k:(y.methods={},y.start=!0,y.open=!1,y.type=i.type,i.autofocus=i==a(),i.readOnly=!_.editable,i.id=i.id||y.id,"text"!=i.type&&(i.type="text"),k.component=new c(k,_),k.$root=e('<div class="'+$.picker+'" id="'+i.id+'_root" />'),r(k.$root[0],"hidden",!0),k.$holder=e(f()).appendTo(k.$root),h(),_.formatSubmit&&function(){var t;!0===_.hiddenName?(t=i.name,i.name=""):t=(t=["string"==typeof _.hiddenPrefix?_.hiddenPrefix:"","string"==typeof _.hiddenSuffix?_.hiddenSuffix:"_submit"])[0]+i.name+t[1],k._hidden=e('<input type=hidden name="'+t+'"'+(b.data("value")||i.value?' value="'+k.get("select",_.formatSubmit)+'"':"")+">")[0],b.on("change."+y.id,(function(){k._hidden.value=i.value?k.get("select",_.formatSubmit):""}))}(),p(),_.containerHidden?e(_.containerHidden).append(k._hidden):b.after(k._hidden),_.container?e(_.container).append(k.$root):b.after(k.$root),k.on({start:k.component.onStart,render:k.component.onRender,stop:k.component.onStop,open:k.component.onOpen,close:k.component.onClose,set:k.component.onSet}).on({start:_.onStart,render:_.onRender,stop:_.onStop,open:_.onOpen,close:_.onClose,set:_.onSet}),v=function(e){var t,n="position";return e.currentStyle?t=e.currentStyle[n]:window.getComputedStyle&&(t=getComputedStyle(e)[n]),"fixed"==t}(k.$holder[0]),i.autofocus&&k.open(),k.trigger("start").trigger("render"))},render:function(t){return t?(k.$holder=e(f()),h(),k.$root.html(k.$holder)):k.$root.find("."+$.box).html(k.component.nodes(y.open)),k.trigger("render")},stop:function(){return y.start?(k.close(),k._hidden&&k._hidden.parentNode.removeChild(k._hidden),k.$root.remove(),b.removeClass($.input).removeData(d),setTimeout((function(){b.off("."+y.id)}),0),i.type=y.type,i.readOnly=!1,k.trigger("stop"),y.methods={},y.start=!1,k):k},open:function(a){return y.open?k:(b.addClass($.active),r(i,"expanded",!0),setTimeout((function(){k.$root.addClass($.opened),r(k.$root[0],"hidden",!1)}),0),!1!==a&&(y.open=!0,v&&e("body").css("overflow","hidden").css("padding-right","+="+n()),v&&s?k.$holder.find("."+$.frame).one("transitionend",(function(){k.$holder.eq(0).focus()})):setTimeout((function(){k.$holder.eq(0).focus()}),0),u.on("click."+y.id+" focusin."+y.id,(function(e){if(!y.handlingOpen){var t=o(e,i);e.isSimulated||t==i||t==document||3==e.which||k.close(t===k.$holder[0])}})).on("keydown."+y.id,(function(n){var r=n.keyCode,a=k.component.key[r],d=o(n,i);27==r?k.close(!0):d!=k.$holder[0]||!a&&13!=r?e.contains(k.$root[0],d)&&13==r&&(n.preventDefault(),d.click()):(n.preventDefault(),a?t._.trigger(k.component.key.go,k,[t._.trigger(a)]):k.$root.find("."+$.highlighted).hasClass($.disabled)||(k.set("select",k.component.item.highlight),_.closeOnSelect&&k.close(!0)))}))),k.trigger("open"))},close:function(t){return t&&(_.editable?i.focus():(k.$holder.off("focus.toOpen").focus(),setTimeout((function(){k.$holder.on("focus.toOpen",m)}),0))),b.removeClass($.active),r(i,"expanded",!1),setTimeout((function(){k.$root.removeClass($.opened+" "+$.focused),r(k.$root[0],"hidden",!0)}),0),y.open?(y.open=!1,v&&e("body").css("overflow","").css("padding-right","-="+n()),u.off("."+y.id),k.trigger("close")):k},clear:function(e){return k.set("clear",null,e)},set:function(t,n,o){var r,i,a=e.isPlainObject(t),d=a?t:{};if(o=a&&e.isPlainObject(n)?n:o||{},t){for(r in a||(d[t]=n),d)i=d[r],r in k.component.item&&(void 0===i&&(i=null),k.component.set(r,i,o)),"select"!=r&&"clear"!=r||!_.updateInput||b.val("clear"==r?"":k.get(r,_.format)).trigger("change");k.render()}return o.muted?k:k.trigger("set",d)},get:function(e,n){if(null!=y[e=e||"value"])return y[e];if("valueSubmit"==e){if(k._hidden)return k._hidden.value;e="value"}if("value"==e)return i.value;if(e in k.component.item){if("string"==typeof n){var o=k.component.get(e);return o?t._.trigger(k.component.formats.toString,k.component,[n,o]):""}return k.component.get(e)}},on:function(t,n,o){var r,i,a=e.isPlainObject(t),d=a?t:{};if(t)for(r in a||(d[t]=n),d)i=d[r],o&&(r="_"+r),y.methods[r]=y.methods[r]||[],y.methods[r].push(i);return k},off:function(){var e,t,n=arguments;for(e=0,namesCount=n.length;e<namesCount;e+=1)(t=n[e])in y.methods&&delete y.methods[t];return k},trigger:function(e,n){var o=function(e){var o=y.methods[e];o&&o.map((function(e){t._.trigger(e,k,[n])}))};return o("_"+e),o(e),k}};return new x}function n(){if(c.height()<=d.height())return 0;var t=e('<div style="visibility:hidden;width:100px" />').appendTo("body"),n=t[0].offsetWidth;t.css("overflow","scroll");var o=e('<div style="width:100%" />').appendTo(t)[0].offsetWidth;return t.remove(),n-o}function o(e,t){var n=[];return e.path&&(n=e.path),e.originalEvent&&e.originalEvent.path&&(n=e.originalEvent.path),n&&n.length>0?t&&n.indexOf(t)>=0?t:n[0]:e.target}function r(t,n,o){if(e.isPlainObject(n))for(var r in n)i(t,r,n[r]);else i(t,n,o)}function i(e,t,n){e.setAttribute(("role"==t?"":"aria-")+t,n)}function a(){try{return document.activeElement}catch(e){}}var d=e(window),u=e(document),c=e(document.documentElement),s=null!=document.documentElement.style.transition;return t.klasses=function(e){return{picker:e=e||"picker",opened:e+"--opened",focused:e+"--focused",input:e+"__input",active:e+"__input--active",target:e+"__input--target",holder:e+"__holder",frame:e+"__frame",wrap:e+"__wrap",box:e+"__box"}},t._={group:function(e){for(var n,o="",r=t._.trigger(e.min,e);r<=t._.trigger(e.max,e,[r]);r+=e.i)n=t._.trigger(e.item,e,[r]),o+=t._.node(e.node,n[0],n[1],n[2]);return o},node:function(t,n,o,r){return n?"<"+t+(o=o?' class="'+o+'"':"")+(r=r?" "+r:"")+">"+(n=e.isArray(n)?n.join(""):n)+"</"+t+">":""},lead:function(e){return(e<10?"0":"")+e},trigger:function(e,t,n){return"function"==typeof e?e.apply(t,n||[]):e},digits:function(e){return/\d/.test(e[1])?2:1},isDate:function(e){return{}.toString.call(e).indexOf("Date")>-1&&this.isInteger(e.getDate())},isInteger:function(e){return{}.toString.call(e).indexOf("Number")>-1&&e%1==0},ariaAttr:function(t,n){for(var o in e.isPlainObject(t)||(t={attribute:n}),n="",t){var r=("role"==o?"":"aria-")+o;n+=null==t[o]?"":r+'="'+t[o]+'"'}return n}},t.extend=function(n,o){e.fn[n]=function(r,i){var a=this.data(n);return"picker"==r?a:a&&"string"==typeof r?t._.trigger(a[r],a,[i]):this.each((function(){e(this).data(n)||new t(this,n,o,r)}))},e.fn[n].defaults=o.defaults},t}));